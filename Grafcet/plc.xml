<?xml version='1.0' encoding='utf-8'?>
<project xmlns:ns1="http://www.plcopen.org/xml/tc6_0201" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://www.plcopen.org/xml/tc6_0201">
  <fileHeader companyName="Unknown" productName="Unnamed" productVersion="1" creationDateTime="2018-04-02T01:08:32"/>
  <contentHeader name="Beremiz" modificationDateTime="2018-04-03T16:55:11">
    <coordinateInfo>
      <fbd>
        <scaling x="0" y="0"/>
      </fbd>
      <ld>
        <scaling x="0" y="0"/>
      </ld>
      <sfc>
        <scaling x="0" y="0"/>
      </sfc>
    </coordinateInfo>
  </contentHeader>
  <types>
    <dataTypes/>
    <pous>
      <pou name="FunctionBlockTest" pouType="program">
        <interface>
          <localVars>
            <variable name="FS_MES" address="%IX0.1.0.0">
              <type>
                <BOOL/>
              </type>
            </variable>
            <variable name="BS_MES" address="%IX0.1.0.1">
              <type>
                <BOOL/>
              </type>
            </variable>
            <variable name="s0" address="%IX0.0.0.0">
              <type>
                <BOOL/>
              </type>
            </variable>
            <variable name="a0" address="%QX0.0.1.0">
              <type>
                <BOOL/>
              </type>
            </variable>
            <variable name="a1" address="%QX0.0.1.1">
              <type>
                <BOOL/>
              </type>
            </variable>
          </localVars>
          <localVars>
            <variable name="LinearConveyor_ST0">
              <type>
                <derived name="LinearConveyor_ST"/>
              </type>
            </variable>
          </localVars>
          <localVars>
            <variable name="s1" address="%IX0.0.0.1">
              <type>
                <BOOL/>
              </type>
            </variable>
          </localVars>
        </interface>
        <body>
          <FBD>
            <outVariable localId="3" executionOrderId="0" height="48" width="41" negated="false">
              <position x="1037" y="263"/>
              <connectionPointIn>
                <relPosition x="0" y="24"/>
                <connection refLocalId="7" formalParameter="Move_Forward">
                  <position x="1037" y="287"/>
                  <position x="917" y="287"/>
                  <position x="917" y="262"/>
                  <position x="844" y="262"/>
                </connection>
              </connectionPointIn>
              <expression>a1</expression>
            </outVariable>
            <outVariable localId="4" executionOrderId="0" height="48" width="41" negated="false">
              <position x="1020" y="379"/>
              <connectionPointIn>
                <relPosition x="0" y="24"/>
                <connection refLocalId="7" formalParameter="Move_Backward">
                  <position x="1020" y="403"/>
                  <position x="908" y="403"/>
                  <position x="908" y="357"/>
                  <position x="844" y="357"/>
                </connection>
              </connectionPointIn>
              <expression>a0</expression>
            </outVariable>
            <inVariable localId="5" executionOrderId="0" height="48" width="208" negated="false">
              <position x="0" y="271"/>
              <connectionPointOut>
                <relPosition x="208" y="24"/>
              </connectionPointOut>
              <expression>FS_MES</expression>
            </inVariable>
            <inVariable localId="6" executionOrderId="0" height="48" width="120" negated="false">
              <position x="18" y="137"/>
              <connectionPointOut>
                <relPosition x="120" y="24"/>
              </connectionPointOut>
              <expression>BS_MES</expression>
            </inVariable>
            <block localId="7" typeName="LinearConveyor_ST" instanceName="LinearConveyor_ST0" executionOrderId="0" height="495" width="535">
              <position x="309" y="100"/>
              <inputVariables>
                <variable formalParameter="Back_Signal">
                  <connectionPointIn>
                    <relPosition x="0" y="67"/>
                    <connection refLocalId="6">
                      <position x="309" y="167"/>
                      <position x="223" y="167"/>
                      <position x="223" y="161"/>
                      <position x="138" y="161"/>
                    </connection>
                  </connectionPointIn>
                </variable>
                <variable formalParameter="Reach_Sensor_Previous">
                  <connectionPointIn>
                    <relPosition x="0" y="162"/>
                  </connectionPointIn>
                </variable>
                <variable formalParameter="Forward_Signal">
                  <connectionPointIn>
                    <relPosition x="0" y="257"/>
                    <connection refLocalId="5">
                      <position x="309" y="357"/>
                      <position x="258" y="357"/>
                      <position x="258" y="295"/>
                      <position x="208" y="295"/>
                    </connection>
                  </connectionPointIn>
                </variable>
                <variable formalParameter="Reach_Sensor">
                  <connectionPointIn>
                    <relPosition x="0" y="352"/>
                  </connectionPointIn>
                </variable>
                <variable formalParameter="Reach_Sensor_Next">
                  <connectionPointIn>
                    <relPosition x="0" y="447"/>
                  </connectionPointIn>
                </variable>
              </inputVariables>
              <inOutVariables/>
              <outputVariables>
                <variable formalParameter="OUT">
                  <connectionPointOut>
                    <relPosition x="535" y="67"/>
                  </connectionPointOut>
                </variable>
                <variable formalParameter="Move_Forward">
                  <connectionPointOut>
                    <relPosition x="535" y="162"/>
                  </connectionPointOut>
                </variable>
                <variable formalParameter="Move_Backward">
                  <connectionPointOut>
                    <relPosition x="535" y="257"/>
                  </connectionPointOut>
                </variable>
                <variable formalParameter="isIdle">
                  <connectionPointOut>
                    <relPosition x="535" y="352"/>
                  </connectionPointOut>
                </variable>
              </outputVariables>
            </block>
          </FBD>
        </body>
      </pou>
      <pou name="LinearConveyor_ST" pouType="functionBlock">
        <interface>
          <returnType>
            <BOOL/>
          </returnType>
          <inputVars>
            <variable name="Back_Signal">
              <type>
                <BOOL/>
              </type>
              <initialValue>
                <simpleValue value="false"/>
              </initialValue>
            </variable>
            <variable name="Reach_Sensor_Previous">
              <type>
                <BOOL/>
              </type>
              <initialValue>
                <simpleValue value="false"/>
              </initialValue>
            </variable>
            <variable name="Forward_Signal">
              <type>
                <BOOL/>
              </type>
              <initialValue>
                <simpleValue value="false"/>
              </initialValue>
            </variable>
          </inputVars>
          <outputVars>
            <variable name="Move_Forward">
              <type>
                <BOOL/>
              </type>
              <initialValue>
                <simpleValue value="false"/>
              </initialValue>
            </variable>
            <variable name="Move_Backward">
              <type>
                <BOOL/>
              </type>
              <initialValue>
                <simpleValue value="false"/>
              </initialValue>
            </variable>
          </outputVars>
          <inputVars>
            <variable name="Reach_Sensor">
              <type>
                <BOOL/>
              </type>
              <initialValue>
                <simpleValue value="false"/>
              </initialValue>
            </variable>
            <variable name="Reach_Sensor_Next">
              <type>
                <BOOL/>
              </type>
              <initialValue>
                <simpleValue value="false"/>
              </initialValue>
            </variable>
          </inputVars>
          <outputVars>
            <variable name="isIdle">
              <type>
                <BOOL/>
              </type>
              <initialValue>
                <simpleValue value="true"/>
              </initialValue>
            </variable>
          </outputVars>
        </interface>
        <body>
          <ST>
            <xhtml:p><![CDATA[IF Reach_Sensor THEN
  isIdle := FALSE;
  IF Back_Signal THEN
    Move_Backward := true;
  ELSIF Forward_Signal THEN
    Move_Forward := true;
  END_IF;
END_IF;

isIdle := TRUE;
  
    
    ]]></xhtml:p>
          </ST>
        </body>
      </pou>
    </pous>
  </types>
  <instances>
    <configurations>
      <configuration name="config">
        <resource name="resource1">
          <task name="task0" priority="0" interval="T#20ms"/>
          <pouInstance name="instance0" typeName="FunctionBlockTest"/>
        </resource>
      </configuration>
    </configurations>
  </instances>
</project>
